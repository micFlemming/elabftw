<!-- JSON EDITOR -->
<!-- json metadata is preloaded for templates -->
<section class='box' id='json-editor'>
  <h3 data-action='toggle-next' data-icon='jsonEditorIcon' class='d-inline'><i id='jsonEditorIcon' class='fas fa-chevron-circle-down'></i> <i class='fas fa-fw fa-list'></i> {{ 'JSON Editor'|trans }}</h3>
  <div id='jsonEditorDiv' class='mt-2' hidden data-save-hidden='jsonEditorDiv'>
    <button type='button' id='jsonEditorMetadataLoadButton' data-action='json-load-metadata' class='btn btn-neutral mb-2'>{{ 'Load metadata'|trans }}</button> <button type='button' data-action='json-clear' class='btn btn-danger mb-2'>{{ 'Clear'|trans }}</button>
    <span data-action='toggle-next'><i class='fas fa-fw fa-info-circle'></i></span><span hidden><a target='_blank' href='https://doc.elabftw.net/metadata.html'>{{ 'See documentation about extra fields.'|trans }} <i class='fas fa-fw fa-arrow-up-right-from-square'></i></a></span>
    <h6 id='jsonEditorTitle'></h6>
    <div id='jsonEditorContainer' data-preload-json='1'></div>
    {% if mode == 'edit' %}
      <div class='mt-4 text-center'>
        <div class='btn-group'>
          <button type='button' data-action='json-save' class='btn btn-primary'>{{ 'Save'|trans }}</button>
          <div class='btn-group dropright' role='group'>
            <button type='button' id='json-save-dropdown' class='btn btn-primary dropdown-toggle dropdown-toggle-split' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
              <span class='sr-only'>{{ 'Toggle JSON editor save menu'|trans }}</span>
            </button>
            <div class='dropdown-menu'>
              <a href='#' data-action='json-save-file' class='dropdown-item'>{{ 'Save as file'|trans }}</a>
              <a href='#' data-action='json-save-metadata' class='dropdown-item'>{{ 'Save as metadata'|trans }}</a>
            </div>
          </div>
        </div>
      </div>
    {% endif %}
    {% if mode == 'edit-template' %}
      <div class='mt-4 text-center'>
        <button type='button' id='templateJsonSave' data-action='json-save-metadata-from-id' data-id='{{ templateData.id }}' class='btn btn-primary'>{{ 'Save as metadata'|trans }}</button>
        <button type='button' data-action='json-clear' class='btn btn-danger float-right'>{{ 'Clear'|trans }}</button>
      </div>
    {% endif %}
  </div>
</section>
